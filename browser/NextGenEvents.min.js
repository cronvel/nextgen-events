(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.NextGenEvents=e()}})(function(){var e,t,n;return function e(t,n,i){function r(o,c){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!c&&a)return a(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return r(n?n:e)},f,f.exports,e,t,n,i)}return n[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){(function(n,i){"use strict";const r=n.browser?window.setImmediate:n.nextTick;function s(){}t.exports=s;s.prototype.__prototypeUID__="nextgen-events/NextGenEvents";s.prototype.__prototypeVersion__=e("../package.json").version;s.SYNC=-Infinity;s.init=function e(){Object.defineProperty(this,"__ngev",{configurable:true,value:{nice:s.SYNC,interruptible:false,recursion:0,contexts:{},states:{},stateGroups:{},listeners:{error:[],interrupt:[],newListener:[],removeListener:[]}}})};s.initFrom=function e(t){if(!t.__ngev){s.init.call(t)}Object.defineProperty(this,"__ngev",{configurable:true,value:{nice:t.__ngev.nice,interruptible:t.__ngev.interruptible,recursion:0,contexts:{},states:Object.assign({},t.__ngev.states),stateGroups:Object.assign({},t.__ngev.stateGroups),listeners:{}}});Object.keys(t.__ngev.listeners).forEach(e=>{this.__ngev.listeners[e]=t.__ngev.listeners[e].slice()});Object.keys(t.__ngev.contexts).forEach(e=>{var n=t.__ngev.contexts[e];this.addListenerContext(e,{nice:n.nice,status:n.status,serial:n.serial})})};s.mergeListeners=function e(t){if(!this.__ngev){s.init.call(this)}var n=this.__ngev.listeners;this.__ngev.listeners={};Object.keys(n).forEach(e=>{this.__ngev.listeners[e]=[]});t.forEach(e=>{if(!e.__ngev){s.init.call(e)}Object.keys(e.__ngev.listeners).forEach(e=>{if(!this.__ngev.listeners[e]){this.__ngev.listeners[e]=[]}})});Object.keys(this.__ngev.listeners).forEach(e=>{var i,r,s=[];if(n[e]){n[e].forEach(n=>{for(i=0,r=t.length;i<r;i++){if(!t[i].__ngev.listeners[e]||t[i].__ngev.listeners[e].indexOf(n)===-1){s.push(n);break}}})}t.forEach(t=>{t.__ngev.listeners[e].forEach(t=>{if(this.__ngev.listeners[e].indexOf(t)===-1&&s.indexOf(t)===-1){this.__ngev.listeners[e].push(t)}})})})};s.filterOutCallback=function(e,t){return e!==t};s.prototype.addListener=function e(t,n,i){var r={},o;if(!this.__ngev){s.init.call(this)}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}if(!t||typeof t!=="string"){throw new TypeError(".addListener(): argument #0 should be a non-empty string")}if(typeof n!=="function"){i=n;n=undefined}if(!i||typeof i!=="object"){i={}}r.fn=n||i.fn;r.id=i.id!==undefined?i.id:r.fn;r.once=!!i.once;r.async=!!i.async;r.eventObject=!!i.eventObject;r.nice=i.nice!==undefined?Math.floor(i.nice):s.SYNC;r.context=typeof i.context==="string"?i.context:null;if(typeof r.fn!=="function"){throw new TypeError(".addListener(): a function or an object with a 'fn' property which value is a function should be provided")}if(r.context&&typeof r.context==="string"&&!this.__ngev.contexts[r.context]){this.addListenerContext(r.context)}r.event=t;if(this.__ngev.listeners.newListener.length){o=this.__ngev.listeners.newListener.slice();this.__ngev.listeners[t].push(r);s.emitEvent({emitter:this,name:"newListener",args:[[r]],listeners:o});if(this.__ngev.states[t]){s.emitToOneListener(this.__ngev.states[t],r)}return this}this.__ngev.listeners[t].push(r);if(this.__ngev.states[t]){s.emitToOneListener(this.__ngev.states[t],r)}return this};s.prototype.on=s.prototype.addListener;s.prototype.once=function e(t,n,i){if(n&&typeof n==="object"){n.once=true}else if(i&&typeof i==="object"){i.once=true}else{i={once:true}}return this.addListener(t,n,i)};s.prototype.removeListener=function e(t,n){var i,r,o=[],c=[];if(!t||typeof t!=="string"){throw new TypeError(".removeListener(): argument #0 should be a non-empty string")}if(!this.__ngev){s.init.call(this)}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}r=this.__ngev.listeners[t].length;for(i=0;i<r;i++){if(this.__ngev.listeners[t][i].id===n){c.push(this.__ngev.listeners[t][i])}else{o.push(this.__ngev.listeners[t][i])}}this.__ngev.listeners[t]=o;if(c.length&&this.__ngev.listeners.removeListener.length){this.emit("removeListener",c)}return this};s.prototype.off=s.prototype.removeListener;s.prototype.removeAllListeners=function e(t){var n;if(!this.__ngev){s.init.call(this)}if(t){if(!t||typeof t!=="string"){throw new TypeError(".removeAllListeners(): argument #0 should be undefined or a non-empty string")}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}n=this.__ngev.listeners[t];this.__ngev.listeners[t]=[];if(n.length&&this.__ngev.listeners.removeListener.length){this.emit("removeListener",n)}}else{this.__ngev.listeners={}}return this};s.listenerWrapper=function e(t,n,i){var r,o,c;if(n.interrupt){return}if(t.async){if(i){o=i.serial;i.ready=!o}c=(e=>{n.listenersDone++;if(e&&n.emitter.__ngev.interruptible&&!n.interrupt&&n.name!=="interrupt"){n.interrupt=e;if(n.callback){s.emitCallback(n)}n.emitter.emit("interrupt",n.interrupt)}else if(n.listenersDone>=n.listeners.length&&n.callback){s.emitCallback(n)}if(o){s.processQueue.call(n.emitter,t.context,true)}});if(t.eventObject){t.fn(n,c)}else{r=t.fn.apply(undefined,n.args.concat(c))}}else{if(t.eventObject){t.fn(n)}else{r=t.fn.apply(undefined,n.args)}n.listenersDone++}if(r&&n.emitter.__ngev.interruptible&&!n.interrupt&&n.name!=="interrupt"){n.interrupt=r;if(n.callback){s.emitCallback(n)}n.emitter.emit("interrupt",n.interrupt)}else if(n.listenersDone>=n.listeners.length&&n.callback){s.emitCallback(n)}};var o=0;s.prototype.emit=function e(...t){var n;n={emitter:this,interrupt:null,sync:true};if(typeof t[0]==="number"){n.nice=Math.floor(t[0]);n.name=t[1];if(!n.name||typeof n.name!=="string"){throw new TypeError(".emit(): when argument #0 is a number, argument #1 should be a non-empty string")}if(typeof t[t.length-1]==="function"){n.callback=t[t.length-1];n.args=t.slice(2,-1)}else{n.args=t.slice(2)}}else{n.name=t[0];if(!n.name||typeof n.name!=="string"){throw new TypeError(".emit(): argument #0 should be an number or a non-empty string")}if(typeof t[t.length-1]==="function"){n.callback=t[t.length-1];n.args=t.slice(1,-1)}else{n.args=t.slice(1)}}return s.emitEvent(n)};s.emitEvent=function e(t){var n=t.emitter,i,r,c=0,a,u;if(!n.__ngev){s.init.call(n)}a=n.__ngev.states[t.name];if(a!==undefined){if(a&&t.args.length===a.args.length&&t.args.every((e,t)=>e===a.args[t])){return}n.__ngev.stateGroups[t.name].forEach(e=>{n.__ngev.states[e]=null});n.__ngev.states[t.name]=t}if(!n.__ngev.listeners[t.name]){n.__ngev.listeners[t.name]=[]}t.id=o++;t.listenersDone=0;t.once=!!t.once;if(t.nice===undefined||t.nice===null){t.nice=n.__ngev.nice}if(!t.listeners){t.listeners=n.__ngev.listeners[t.name].slice()}n.__ngev.recursion++;u=[];for(i=0,r=t.listeners.length;i<r;i++){c++;s.emitToOneListener(t,t.listeners[i],u)}n.__ngev.recursion--;if(u.length&&n.__ngev.listeners.removeListener.length){n.emit("removeListener",u)}if(!c){if(t.name==="error"){if(t.args[0]){throw t.args[0]}else{throw Error("Uncaught, unspecified 'error' event.")}}if(t.callback){s.emitCallback(t)}}t.sync=false;return t};s.emitToOneListener=function e(t,n,i){var r=t.emitter,o,c,a=false;o=n.context&&r.__ngev.contexts[n.context];if(o&&o.status===s.CONTEXT_DISABLED){return}if(o){c=Math.max(t.nice,n.nice,o.nice)}else{c=Math.max(t.nice,n.nice)}if(n.once){r.__ngev.listeners[t.name]=r.__ngev.listeners[t.name].filter(s.filterOutCallback.bind(undefined,n));if(i){i.push(n)}else{a=true}}if(o&&(o.status===s.CONTEXT_QUEUED||!o.ready)){o.queue.push({event:t,listener:n,nice:c})}else{try{if(c<0){if(r.__ngev.recursion>=-c){setImmediate(s.listenerWrapper.bind(r,n,t,o))}else{s.listenerWrapper.call(r,n,t,o)}}else{setTimeout(s.listenerWrapper.bind(r,n,t,o),c)}}catch(e){r.__ngev.recursion--;throw e}}if(a&&r.__ngev.listeners.removeListener.length){r.emit("removeListener",[n])}};s.emitCallback=function e(t){var n=t.callback;delete t.callback;if(t.sync&&t.emitter.__ngev.nice!==s.SYNC){r(()=>{n(t.interrupt,t)})}else{n(t.interrupt,t)}};s.prototype.listeners=function e(t){if(!t||typeof t!=="string"){throw new TypeError(".listeners(): argument #0 should be a non-empty string")}if(!this.__ngev){s.init.call(this)}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}return this.__ngev.listeners[t].slice()};s.listenerCount=function(e,t){if(!e||!(e instanceof s)){throw new TypeError(".listenerCount(): argument #0 should be an instance of NextGenEvents")}return e.listenerCount(t)};s.prototype.listenerCount=function(e){if(!e||typeof e!=="string"){throw new TypeError(".listenerCount(): argument #1 should be a non-empty string")}if(!this.__ngev){s.init.call(this)}if(!this.__ngev.listeners[e]){this.__ngev.listeners[e]=[]}return this.__ngev.listeners[e].length};s.prototype.setNice=function e(t){if(!this.__ngev){s.init.call(this)}this.__ngev.nice=Math.floor(+t||0)};s.prototype.setInterruptible=function e(t){if(!this.__ngev){s.init.call(this)}this.__ngev.interruptible=!!t};s.share=function(e,t){if(!(e instanceof s)||!(t instanceof s)){throw new TypeError("NextGenEvents.share() arguments should be instances of NextGenEvents")}if(!e.__ngev){s.init.call(e)}Object.defineProperty(t,"__ngev",{configurable:true,value:e.__ngev})};s.reset=function e(t){Object.defineProperty(t,"__ngev",{configurable:true,value:null})};s.prototype.setMaxListeners=function(){};s.noop=function(){};s.prototype.defineStates=function e(...t){if(!this.__ngev){s.init.call(this)}t.forEach(e=>{this.__ngev.states[e]=null;this.__ngev.stateGroups[e]=t})};s.prototype.hasState=function e(t){if(!this.__ngev){s.init.call(this)}return!!this.__ngev.states[t]};s.prototype.getAllStates=function e(){if(!this.__ngev){s.init.call(this)}return Object.keys(this.__ngev.states).filter(e=>this.__ngev.states[e])};s.groupAddListener=function e(t,n,i,r){if(typeof i!=="function"){r=i;i=undefined}if(!r||typeof r!=="object"){r={}}i=i||r.fn;delete r.fn;r.id=r.id||i;t.forEach(e=>{e.addListener(n,i.bind(undefined,e),r)})};s.groupOn=s.groupAddListener;s.groupOnce=function e(t,n,i,r){if(i&&typeof i==="object"){i.once=true}else if(r&&typeof r==="object"){r.once=true}else{r={once:true}}return this.groupAddListener(t,n,i,r)};s.groupGlobalOnce=function e(t,n,i,r){var o,c=false;if(typeof i!=="function"){r=i;i=undefined}if(!r||typeof r!=="object"){r={}}i=i||r.fn;delete r.fn;r.id=r.id||i;o=((...e)=>{if(c){return}c=true;s.groupRemoveListener(t,n,r.id);i(...e)});t.forEach(e=>{e.once(n,o.bind(undefined,e),r)})};s.groupGlobalOnceAll=function e(t,n,i,r){var s,o=false,c=t.length;if(typeof i!=="function"){r=i;i=undefined}if(!r||typeof r!=="object"){r={}}i=i||r.fn;delete r.fn;r.id=r.id||i;s=((...e)=>{if(o){return}if(--c){return}o=true;i(...e)});t.forEach(e=>{e.once(n,s.bind(undefined,e),r)})};s.groupRemoveListener=function e(t,n,i){t.forEach(e=>{e.removeListener(n,i)})};s.groupOff=s.groupRemoveListener;s.groupRemoveAllListeners=function e(t,n){t.forEach(e=>{e.removeAllListeners(n)})};s.groupEmit=function e(t,...n){var i,r,o=1,c,a=t.length,u,f,l=false;if(typeof n[n.length-1]==="function"){c=-1;u=n[n.length-1];f=(e=>{if(l){return}if(e){l=true;u(e)}else if(!--a){l=true;u()}})}if(typeof n[0]==="number"){o=2;r=typeof n[0]}i=n[o-1];n=n.slice(o,c);t.forEach(e=>{s.emitEvent({emitter:e,name:i,args:n,nice:r,callback:f})})};s.groupDefineStates=function e(t,...n){t.forEach(e=>{e.defineStates(...n)})};s.CONTEXT_ENABLED=0;s.CONTEXT_DISABLED=1;s.CONTEXT_QUEUED=2;s.prototype.addListenerContext=function e(t,n){if(!this.__ngev){s.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".addListenerContext(): argument #0 should be a non-empty string")}if(!n||typeof n!=="object"){n={}}if(!this.__ngev.contexts[t]){this.__ngev.contexts[t]=Object.create(s.prototype);this.__ngev.contexts[t].nice=s.SYNC;this.__ngev.contexts[t].ready=true;this.__ngev.contexts[t].status=s.CONTEXT_ENABLED;this.__ngev.contexts[t].serial=false;this.__ngev.contexts[t].queue=[]}if(n.nice!==undefined){this.__ngev.contexts[t].nice=Math.floor(n.nice)}if(n.status!==undefined){this.__ngev.contexts[t].status=n.status}if(n.serial!==undefined){this.__ngev.contexts[t].serial=!!n.serial}return this};s.prototype.disableListenerContext=function e(t){if(!this.__ngev){s.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".disableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].status=s.CONTEXT_DISABLED;return this};s.prototype.enableListenerContext=function e(t){if(!this.__ngev){s.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".enableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].status=s.CONTEXT_ENABLED;if(this.__ngev.contexts[t].queue.length>0){s.processQueue.call(this,t)}return this};s.prototype.queueListenerContext=function e(t){if(!this.__ngev){s.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".queueListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].status=s.CONTEXT_QUEUED;return this};s.prototype.serializeListenerContext=function e(t,n){if(!this.__ngev){s.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".serializeListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].serial=n===undefined?true:!!n;return this};s.prototype.setListenerContextNice=function e(t,n){if(!this.__ngev){s.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".setListenerContextNice(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].nice=Math.floor(n);return this};s.prototype.destroyListenerContext=function e(t){var n,i,r,o,c=[];if(!t||typeof t!=="string"){throw new TypeError(".disableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev){s.init.call(this)}for(r in this.__ngev.listeners){o=null;i=this.__ngev.listeners[r].length;for(n=0;n<i;n++){if(this.__ngev.listeners[r][n].context===t){o=[];c.push(this.__ngev.listeners[r][n])}else if(o){o.push(this.__ngev.listeners[r][n])}}if(o){this.__ngev.listeners[r]=o}}if(this.__ngev.contexts[t]){delete this.__ngev.contexts[t]}if(c.length&&this.__ngev.listeners.removeListener.length){this.emit("removeListener",c)}return this};s.processQueue=function e(t,n){var i,r;if(!this.__ngev.contexts[t]){return}i=this.__ngev.contexts[t];if(n){i.ready=true}this.__ngev.recursion++;while(i.ready&&i.queue.length){r=i.queue.shift();if(r.event.interrupt){continue}try{if(r.nice<0){if(this.__ngev.recursion>=-r.nice){setImmediate(s.listenerWrapper.bind(this,r.listener,r.event,i))}else{s.listenerWrapper.call(this,r.listener,r.event,i)}}else{setTimeout(s.listenerWrapper.bind(this,r.listener,r.event,i),r.nice)}}catch(e){this.__ngev.recursion--;throw e}}this.__ngev.recursion--};s.on=s.prototype.on;s.once=s.prototype.once;s.off=s.prototype.off;if(i.AsyncTryCatch){s.prototype.asyncTryCatchId=i.AsyncTryCatch.NextGenEvents.length;i.AsyncTryCatch.NextGenEvents.push(s);if(i.AsyncTryCatch.substituted){i.AsyncTryCatch.substitute()}}s.Proxy=e("./Proxy.js")}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../package.json":5,"./Proxy.js":2,_process:4}],2:[function(e,t,n){"use strict";function i(){return i.create()}t.exports=i;var r=e("./NextGenEvents.js");var s="NextGenEvents/message";function o(){}i.create=function e(){var t=Object.create(i.prototype,{localServices:{value:{},enumerable:true},remoteServices:{value:{},enumerable:true},nextAckId:{value:1,writable:true,enumerable:true}});return t};i.prototype.addLocalService=function e(t,n,i){this.localServices[t]=c.create(this,t,n,i);return this.localServices[t]};i.prototype.addRemoteService=function e(t){this.remoteServices[t]=a.create(this,t);return this.remoteServices[t]};i.prototype.destroy=function e(){Object.keys(this.localServices).forEach(e=>{this.localServices[e].destroy();delete this.localServices[e]});Object.keys(this.remoteServices).forEach(e=>{this.remoteServices[e].destroy();delete this.remoteServices[e]});this.receive=this.send=o};i.prototype.push=function e(t){if(t.__type!==s||!t.service||typeof t.service!=="string"||!t.event||typeof t.event!=="string"||!t.method){return}switch(t.method){case"event":return this.remoteServices[t.service]&&this.remoteServices[t.service].receiveEvent(t);case"ackEmit":return this.remoteServices[t.service]&&this.remoteServices[t.service].receiveAckEmit(t);case"emit":return this.localServices[t.service]&&this.localServices[t.service].receiveEmit(t);case"listen":return this.localServices[t.service]&&this.localServices[t.service].receiveListen(t);case"ignore":return this.localServices[t.service]&&this.localServices[t.service].receiveIgnore(t);case"ackEvent":return this.localServices[t.service]&&this.localServices[t.service].receiveAckEvent(t);default:return}};i.prototype.receive=function e(t){this.push(t)};i.prototype.send=function e(){throw new Error("The send() method of the Proxy MUST be extended/overwritten")};function c(e,t,n,i){return c.create(e,t,n,i)}i.LocalService=c;c.create=function e(t,n,i,s){var o=Object.create(c.prototype,{proxy:{value:t,enumerable:true},id:{value:n,enumerable:true},emitter:{value:i,writable:true,enumerable:true},internalEvents:{value:Object.create(r.prototype),writable:true,enumerable:true},events:{value:{},enumerable:true},canListen:{value:!!s.listen,writable:true,enumerable:true},canEmit:{value:!!s.emit,writable:true,enumerable:true},canAck:{value:!!s.ack,writable:true,enumerable:true},canRpc:{value:!!s.rpc,writable:true,enumerable:true},destroyed:{value:false,writable:true,enumerable:true}});return o};c.prototype.destroy=function e(){Object.keys(this.events).forEach(e=>{this.emitter.off(e,this.events[e]);delete this.events[e]});this.emitter=null;this.destroyed=true};c.prototype.receiveEmit=function e(t){if(this.destroyed||!this.canEmit||t.ack&&!this.canAck){return}var n={emitter:this.emitter,name:t.event,args:t.args||[]};if(t.ack){n.callback=(e=>{this.proxy.send({__type:s,service:this.id,method:"ackEmit",ack:t.ack,event:t.event,interruption:e})})}r.emitEvent(n)};c.prototype.receiveListen=function e(t){if(this.destroyed||!this.canListen||t.ack&&!this.canAck){return}if(t.ack){if(this.events[t.event]){if(this.events[t.event].ack){return}this.emitter.off(t.event,this.events[t.event])}this.events[t.event]=c.forwardWithAck.bind(this);this.events[t.event].ack=true;this.emitter.on(t.event,this.events[t.event],{eventObject:true,async:true})}else{if(this.events[t.event]){if(!this.events[t.event].ack){return}this.emitter.off(t.event,this.events[t.event])}this.events[t.event]=c.forward.bind(this);this.events[t.event].ack=false;this.emitter.on(t.event,this.events[t.event],{eventObject:true})}};c.prototype.receiveIgnore=function e(t){if(this.destroyed||!this.canListen){return}if(!this.events[t.event]){return}this.emitter.off(t.event,this.events[t.event]);this.events[t.event]=null};c.prototype.receiveAckEvent=function e(t){if(this.destroyed||!this.canListen||!this.canAck||!t.ack||!this.events[t.event]||!this.events[t.event].ack){return}this.internalEvents.emit("ack",t)};c.forward=function e(t){if(this.destroyed){return}this.proxy.send({__type:s,service:this.id,method:"event",event:t.name,args:t.args})};c.forward.ack=false;c.forwardWithAck=function e(t,n){if(this.destroyed){return}if(!t.callback){this.proxy.send({__type:s,service:this.id,method:"event",event:t.name,args:t.args});n();return}var i=false;var r=this.proxy.nextAckId++;var o=e=>{if(i||e.ack!==r){return}i=true;this.internalEvents.off("ack",o);n()};this.internalEvents.on("ack",o);this.proxy.send({__type:s,service:this.id,method:"event",event:t.name,ack:r,args:t.args})};c.forwardWithAck.ack=true;function a(e,t){return a.create(e,t)}i.RemoteService=a;var u=1;var f=2;a.create=function e(t,n){var i=Object.create(a.prototype,{proxy:{value:t,enumerable:true},id:{value:n,enumerable:true},emitter:{value:Object.create(r.prototype),writable:true,enumerable:true},internalEvents:{value:Object.create(r.prototype),writable:true,enumerable:true},events:{value:{},enumerable:true},destroyed:{value:false,writable:true,enumerable:true}});return i};a.prototype.destroy=function e(){this.emitter.removeAllListeners();this.emitter=null;Object.keys(this.events).forEach(e=>{delete this.events[e]});this.destroyed=true};a.prototype.emit=function e(t,...n){if(this.destroyed){return}var i,r,o;if(typeof t==="number"){throw new TypeError("Cannot emit with a nice value on a remote service")}if(typeof n[n.length-1]!=="function"){this.proxy.send({__type:s,service:this.id,method:"emit",event:t,args:n});return}i=n.pop();r=this.proxy.nextAckId++;o=false;var c=e=>{if(o||e.ack!==r){return}o=true;this.internalEvents.off("ack",c);i(e.interruption)};this.internalEvents.on("ack",c);this.proxy.send({__type:s,service:this.id,method:"emit",ack:r,event:t,args:n})};a.prototype.addListener=function e(t,n,i){if(this.destroyed){return}if(typeof n!=="function"){i=n;n=undefined}if(!i||typeof i!=="object"){i={}}i.fn=n||i.fn;this.emitter.addListener(t,i);if(!this.emitter.__ngev.listeners[t]||!this.emitter.__ngev.listeners[t].length){return}if(i.async&&this.events[t]!==f){this.events[t]=f;this.proxy.send({__type:s,service:this.id,method:"listen",ack:true,event:t})}else if(!i.async&&!this.events[t]){this.events[t]=u;this.proxy.send({__type:s,service:this.id,method:"listen",event:t})}};a.prototype.on=a.prototype.addListener;a.prototype.once=r.prototype.once;a.prototype.removeListener=function e(t,n){if(this.destroyed){return}this.emitter.removeListener(t,n);if((!this.emitter.__ngev.listeners[t]||!this.emitter.__ngev.listeners[t].length)&&this.events[t]){this.events[t]=0;this.proxy.send({__type:s,service:this.id,method:"ignore",event:t})}};a.prototype.off=a.prototype.removeListener;a.prototype.receiveEvent=function e(t){if(this.destroyed||!this.events[t.event]){return}var n={emitter:this.emitter,name:t.event,args:t.args||[]};if(t.ack){n.callback=(()=>{this.proxy.send({__type:s,service:this.id,method:"ackEvent",ack:t.ack,event:t.event})})}r.emitEvent(n);var i=n.name;if(!this.emitter.__ngev.listeners[i]||!this.emitter.__ngev.listeners[i].length){this.events[i]=0;this.proxy.send({__type:s,service:this.id,method:"ignore",event:i})}};a.prototype.receiveAckEmit=function e(t){if(this.destroyed||!t.ack||this.events[t.event]!==f){return}this.internalEvents.emit("ack",t)}},{"./NextGenEvents.js":1}],3:[function(e,t,n){"use strict";if(typeof window.setImmediate!=="function"){window.setImmediate=function e(t){setTimeout(t,0)}}t.exports=e("./NextGenEvents.js");t.exports.isBrowser=true},{"./NextGenEvents.js":1}],4:[function(e,t,n){var i=t.exports={};var r;var s;function o(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){r=setTimeout}else{r=o}}catch(e){r=o}try{if(typeof clearTimeout==="function"){s=clearTimeout}else{s=c}}catch(e){s=c}})();function a(e){if(r===setTimeout){return setTimeout(e,0)}if((r===o||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function u(e){if(s===clearTimeout){return clearTimeout(e)}if((s===c||!s)&&clearTimeout){s=clearTimeout;return clearTimeout(e)}try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}var f=[];var l=false;var h;var v=-1;function p(){if(!l||!h){return}l=false;if(h.length){f=h.concat(f)}else{v=-1}if(f.length){_()}}function _(){if(l){return}var e=a(p);l=true;var t=f.length;while(t){h=f;f=[];while(++v<t){if(h){h[v].run()}}v=-1;t=f.length}h=null;l=false;u(e)}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}f.push(new g(e,t));if(f.length===1&&!l){a(_)}};function g(e,t){this.fun=e;this.array=t}g.prototype.run=function(){this.fun.apply(null,this.array)};i.title="browser";i.browser=true;i.env={};i.argv=[];i.version="";i.versions={};function d(){}i.on=d;i.addListener=d;i.once=d;i.off=d;i.removeListener=d;i.removeAllListeners=d;i.emit=d;i.prependListener=d;i.prependOnceListener=d;i.listeners=function(e){return[]};i.binding=function(e){throw new Error("process.binding is not supported")};i.cwd=function(){return"/"};i.chdir=function(e){throw new Error("process.chdir is not supported")};i.umask=function(){return 0}},{}],5:[function(e,t,n){t.exports={name:"nextgen-events",version:"0.11.2",description:"The next generation of events handling for javascript! New: abstract away the network!",main:"lib/NextGenEvents.js",engines:{node:">=6.0.0"},directories:{test:"test"},dependencies:{},devDependencies:{browserify:"^14.4.0","expect.js":"^0.3.1",jshint:"^2.9.2",mocha:"^2.5.3","uglify-js-es6":"^2.8.9",ws:"^3.2.0"},scripts:{test:"mocha -R dot"},repository:{type:"git",url:"https://github.com/cronvel/nextgen-events.git"},keywords:["events","async","emit","listener","context","series","serialize","namespace","proxy","network"],author:"Cédric Ronvel",license:"MIT",bugs:{url:"https://github.com/cronvel/nextgen-events/issues"},config:{"tea-time":{coverDir:["lib"]}},copyright:{title:"Next-Gen Events",years:[2015,2016],owner:"Cédric Ronvel"}}},{}]},{},[3])(3)});