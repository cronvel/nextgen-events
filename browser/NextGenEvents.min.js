(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.NextGenEvents=e()}})(function(){var e,t,n;return function e(t,n,i){function r(o,c){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!c&&a)return a(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return r(n?n:e)},f,f.exports,e,t,n,i)}return n[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){(function(n){"use strict";function i(){}t.exports=i;i.prototype.__prototypeUID__="nextgen-events/NextGenEvents";i.prototype.__prototypeVersion__=e("../package.json").version;i.SYNC=-Infinity;i.init=function e(){Object.defineProperty(this,"__ngev",{configurable:true,value:{nice:i.SYNC,interruptible:false,recursion:0,contexts:{},states:{},stateGroups:{},listeners:{error:[],interrupt:[],newListener:[],removeListener:[]}}})};i.initFrom=function e(t){if(!t.__ngev){i.init.call(t)}Object.defineProperty(this,"__ngev",{configurable:true,value:{nice:t.__ngev.nice,interruptible:t.__ngev.interruptible,recursion:0,contexts:{},states:Object.assign({},t.__ngev.states),stateGroups:Object.assign({},t.__ngev.stateGroups),listeners:{}}});Object.keys(t.__ngev.listeners).forEach(e=>{this.__ngev.listeners[e]=t.__ngev.listeners[e].slice()});Object.keys(t.__ngev.contexts).forEach(e=>{var n=t.__ngev.contexts[e];this.addListenerContext(e,{nice:n.nice,status:n.status,serial:n.serial})})};i.mergeListeners=function e(t){if(!this.__ngev){i.init.call(this)}var n=this.__ngev.listeners;this.__ngev.listeners={};Object.keys(n).forEach(e=>{this.__ngev.listeners[e]=[]});t.forEach(e=>{if(!e.__ngev){i.init.call(e)}Object.keys(e.__ngev.listeners).forEach(e=>{if(!this.__ngev.listeners[e]){this.__ngev.listeners[e]=[]}})});Object.keys(this.__ngev.listeners).forEach(e=>{var i,r,s=[];if(n[e]){n[e].forEach(n=>{for(i=0,r=t.length;i<r;i++){if(!t[i].__ngev.listeners[e]||t[i].__ngev.listeners[e].indexOf(n)===-1){s.push(n);break}}})}t.forEach(t=>{t.__ngev.listeners[e].forEach(t=>{if(this.__ngev.listeners[e].indexOf(t)===-1&&s.indexOf(t)===-1){this.__ngev.listeners[e].push(t)}})})})};i.filterOutCallback=function(e,t){return e!==t};i.prototype.addListener=function e(t,n,r){var s={},o;if(!this.__ngev){i.init.call(this)}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}if(!t||typeof t!=="string"){throw new TypeError(".addListener(): argument #0 should be a non-empty string")}if(typeof n!=="function"){r=n;n=undefined}if(!r||typeof r!=="object"){r={}}s.fn=n||r.fn;s.id=r.id!==undefined?r.id:s.fn;s.once=!!r.once;s.async=!!r.async;s.eventObject=!!r.eventObject;s.nice=r.nice!==undefined?Math.floor(r.nice):i.SYNC;s.context=typeof r.context==="string"?r.context:null;if(typeof s.fn!=="function"){throw new TypeError(".addListener(): a function or an object with a 'fn' property which value is a function should be provided")}if(s.context&&typeof s.context==="string"&&!this.__ngev.contexts[s.context]){this.addListenerContext(s.context)}s.event=t;if(this.__ngev.listeners.newListener.length){o=this.__ngev.listeners.newListener.slice();this.__ngev.listeners[t].push(s);i.emitEvent({emitter:this,name:"newListener",args:[[s]],listeners:o});if(this.__ngev.states[t]){i.emitToOneListener(this.__ngev.states[t],s)}return this}this.__ngev.listeners[t].push(s);if(this.__ngev.states[t]){i.emitToOneListener(this.__ngev.states[t],s)}return this};i.prototype.on=i.prototype.addListener;i.prototype.once=function e(t,n,i){if(n&&typeof n==="object"){n.once=true}else if(i&&typeof i==="object"){i.once=true}else{i={once:true}}return this.addListener(t,n,i)};i.prototype.removeListener=function e(t,n){var r,s,o=[],c=[];if(!t||typeof t!=="string"){throw new TypeError(".removeListener(): argument #0 should be a non-empty string")}if(!this.__ngev){i.init.call(this)}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}s=this.__ngev.listeners[t].length;for(r=0;r<s;r++){if(this.__ngev.listeners[t][r].id===n){c.push(this.__ngev.listeners[t][r])}else{o.push(this.__ngev.listeners[t][r])}}this.__ngev.listeners[t]=o;if(c.length&&this.__ngev.listeners.removeListener.length){this.emit("removeListener",c)}return this};i.prototype.off=i.prototype.removeListener;i.prototype.removeAllListeners=function e(t){var n;if(!this.__ngev){i.init.call(this)}if(t){if(!t||typeof t!=="string"){throw new TypeError(".removeAllListeners(): argument #0 should be undefined or a non-empty string")}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}n=this.__ngev.listeners[t];this.__ngev.listeners[t]=[];if(n.length&&this.__ngev.listeners.removeListener.length){this.emit("removeListener",n)}}else{this.__ngev.listeners={}}return this};i.listenerWrapper=function e(t,n,r){var s,o,c;if(n.interrupt){return}if(t.async){if(r){o=r.serial;r.ready=!o}c=(e=>{n.listenersDone++;if(e&&n.emitter.__ngev.interruptible&&!n.interrupt&&n.name!=="interrupt"){n.interrupt=e;if(n.callback){n.callback(n.interrupt,n);delete n.callback}n.emitter.emit("interrupt",n.interrupt)}else if(n.listenersDone>=n.listeners.length&&n.callback){n.callback(undefined,n);delete n.callback}if(o){i.processQueue.call(n.emitter,t.context,true)}});if(t.eventObject){t.fn(n,c)}else{s=t.fn.apply(undefined,n.args.concat(c))}}else{if(t.eventObject){t.fn(n)}else{s=t.fn.apply(undefined,n.args)}n.listenersDone++}if(s&&n.emitter.__ngev.interruptible&&!n.interrupt&&n.name!=="interrupt"){n.interrupt=s;if(n.callback){n.callback(n.interrupt,n);delete n.callback}n.emitter.emit("interrupt",n.interrupt)}else if(n.listenersDone>=n.listeners.length&&n.callback){n.callback(undefined,n);delete n.callback}};var r=0;i.prototype.emit=function e(){var t;t={emitter:this};if(typeof arguments[0]==="number"){t.nice=Math.floor(arguments[0]);t.name=arguments[1];if(!t.name||typeof t.name!=="string"){throw new TypeError(".emit(): when argument #0 is a number, argument #1 should be a non-empty string")}if(typeof arguments[arguments.length-1]==="function"){t.callback=arguments[arguments.length-1];t.args=Array.prototype.slice.call(arguments,2,-1)}else{t.args=Array.prototype.slice.call(arguments,2)}}else{t.name=arguments[0];if(!t.name||typeof t.name!=="string"){throw new TypeError(".emit(): argument #0 should be an number or a non-empty string")}t.args=Array.prototype.slice.call(arguments,1);if(typeof arguments[arguments.length-1]==="function"){t.callback=arguments[arguments.length-1];t.args=Array.prototype.slice.call(arguments,1,-1)}else{t.args=Array.prototype.slice.call(arguments,1)}}return i.emitEvent(t)};i.emitEvent=function e(t){var n=t.emitter,s,o,c=0,a,l;if(!n.__ngev){i.init.call(n)}a=n.__ngev.states[t.name];if(a!==undefined){if(a&&t.args.length===a.args.length&&t.args.every((e,t)=>e===a.args[t])){return}n.__ngev.stateGroups[t.name].forEach(e=>{n.__ngev.states[e]=null});n.__ngev.states[t.name]=t}if(!n.__ngev.listeners[t.name]){n.__ngev.listeners[t.name]=[]}t.id=r++;t.listenersDone=0;t.once=!!t.once;if(t.nice===undefined||t.nice===null){t.nice=n.__ngev.nice}if(!t.listeners){t.listeners=n.__ngev.listeners[t.name].slice()}n.__ngev.recursion++;l=[];for(s=0,o=t.listeners.length;s<o;s++){c++;i.emitToOneListener(t,t.listeners[s],l)}n.__ngev.recursion--;if(l.length&&n.__ngev.listeners.removeListener.length){n.emit("removeListener",l)}if(!c){if(t.name==="error"){if(t.args[0]){throw t.args[0]}else{throw Error("Uncaught, unspecified 'error' event.")}}if(t.callback){t.callback(undefined,t);delete t.callback}}return t};i.emitToOneListener=function e(t,n,r){var s=t.emitter,o,c,a=false;o=n.context&&s.__ngev.contexts[n.context];if(o&&o.status===i.CONTEXT_DISABLED){return}if(o){c=Math.max(t.nice,n.nice,o.nice)}else{c=Math.max(t.nice,n.nice)}if(n.once){s.__ngev.listeners[t.name]=s.__ngev.listeners[t.name].filter(i.filterOutCallback.bind(undefined,n));if(r){r.push(n)}else{a=true}}if(o&&(o.status===i.CONTEXT_QUEUED||!o.ready)){o.queue.push({event:t,listener:n,nice:c})}else{try{if(c<0){if(s.__ngev.recursion>=-c){setImmediate(i.listenerWrapper.bind(s,n,t,o))}else{i.listenerWrapper.call(s,n,t,o)}}else{setTimeout(i.listenerWrapper.bind(s,n,t,o),c)}}catch(e){s.__ngev.recursion--;throw e}}if(a&&s.__ngev.listeners.removeListener.length){s.emit("removeListener",[n])}};i.prototype.listeners=function e(t){if(!t||typeof t!=="string"){throw new TypeError(".listeners(): argument #0 should be a non-empty string")}if(!this.__ngev){i.init.call(this)}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}return this.__ngev.listeners[t].slice()};i.listenerCount=function(e,t){if(!e||!(e instanceof i)){throw new TypeError(".listenerCount(): argument #0 should be an instance of NextGenEvents")}return e.listenerCount(t)};i.prototype.listenerCount=function(e){if(!e||typeof e!=="string"){throw new TypeError(".listenerCount(): argument #1 should be a non-empty string")}if(!this.__ngev){i.init.call(this)}if(!this.__ngev.listeners[e]){this.__ngev.listeners[e]=[]}return this.__ngev.listeners[e].length};i.prototype.setNice=function e(t){if(!this.__ngev){i.init.call(this)}this.__ngev.nice=Math.floor(+t||0)};i.prototype.setInterruptible=function e(t){if(!this.__ngev){i.init.call(this)}this.__ngev.interruptible=!!t};i.share=function(e,t){if(!(e instanceof i)||!(t instanceof i)){throw new TypeError("NextGenEvents.share() arguments should be instances of NextGenEvents")}if(!e.__ngev){i.init.call(e)}Object.defineProperty(t,"__ngev",{configurable:true,value:e.__ngev})};i.reset=function e(t){Object.defineProperty(t,"__ngev",{configurable:true,value:null})};i.prototype.setMaxListeners=function(){};i.noop=function(){};i.prototype.defineStates=function e(){var t=this,n=Array.prototype.slice.call(arguments);if(!this.__ngev){i.init.call(this)}n.forEach(e=>{t.__ngev.states[e]=null;t.__ngev.stateGroups[e]=n})};i.prototype.hasState=function e(t){if(!this.__ngev){i.init.call(this)}return!!this.__ngev.states[t]};i.prototype.getAllStates=function e(){var t=this;if(!this.__ngev){i.init.call(this)}return Object.keys(this.__ngev.states).filter(e=>t.__ngev.states[e])};i.groupAddListener=function e(t,n,i,r){if(typeof i!=="function"){r=i;i=undefined}if(!r||typeof r!=="object"){r={}}i=i||r.fn;delete r.fn;r.id=r.id||i;t.forEach(e=>{e.addListener(n,i.bind(undefined,e),r)})};i.groupOn=i.groupAddListener;i.groupOnce=function e(t,n,i,r){if(i&&typeof i==="object"){i.once=true}else if(r&&typeof r==="object"){r.once=true}else{r={once:true}}return this.groupAddListener(t,n,i,r)};i.groupGlobalOnce=function e(t,n,r,s){var o,c=false;if(typeof r!=="function"){s=r;r=undefined}if(!s||typeof s!=="object"){s={}}r=r||s.fn;delete s.fn;s.id=s.id||r;o=function(){if(c){return}c=true;i.groupRemoveListener(t,n,s.id);r.apply(undefined,arguments)};t.forEach(e=>{e.once(n,o.bind(undefined,e),s)})};i.groupGlobalOnceAll=function e(t,n,i,r){var s,o=false,c=t.length;if(typeof i!=="function"){r=i;i=undefined}if(!r||typeof r!=="object"){r={}}i=i||r.fn;delete r.fn;r.id=r.id||i;s=function(){if(o){return}if(--c){return}o=true;i.apply(undefined,arguments)};t.forEach(e=>{e.once(n,s.bind(undefined,e),r)})};i.groupRemoveListener=function e(t,n,i){t.forEach(e=>{e.removeListener(n,i)})};i.groupOff=i.groupRemoveListener;i.groupRemoveAllListeners=function e(t,n){t.forEach(e=>{e.removeAllListeners(n)})};i.groupEmit=function e(t){var n,r,s=2,o,c,a=t.length,l,f,u=false;if(typeof arguments[arguments.length-1]==="function"){o=-1;l=arguments[arguments.length-1];f=(e=>{if(u){return}if(e){u=true;l(e)}else if(!--a){u=true;l()}})}if(typeof arguments[1]==="number"){s=3;r=typeof arguments[1]}n=arguments[s-1];c=Array.prototype.slice.call(arguments,s,o);t.forEach(e=>{i.emitEvent({emitter:e,name:n,args:c,nice:r,callback:f})})};i.groupDefineStates=function e(t){var n=Array.prototype.slice.call(arguments,1);t.forEach(e=>{e.defineStates.apply(e,n)})};i.CONTEXT_ENABLED=0;i.CONTEXT_DISABLED=1;i.CONTEXT_QUEUED=2;i.prototype.addListenerContext=function e(t,n){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".addListenerContext(): argument #0 should be a non-empty string")}if(!n||typeof n!=="object"){n={}}if(!this.__ngev.contexts[t]){this.__ngev.contexts[t]=Object.create(i.prototype);this.__ngev.contexts[t].nice=i.SYNC;this.__ngev.contexts[t].ready=true;this.__ngev.contexts[t].status=i.CONTEXT_ENABLED;this.__ngev.contexts[t].serial=false;this.__ngev.contexts[t].queue=[]}if(n.nice!==undefined){this.__ngev.contexts[t].nice=Math.floor(n.nice)}if(n.status!==undefined){this.__ngev.contexts[t].status=n.status}if(n.serial!==undefined){this.__ngev.contexts[t].serial=!!n.serial}return this};i.prototype.disableListenerContext=function e(t){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".disableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].status=i.CONTEXT_DISABLED;return this};i.prototype.enableListenerContext=function e(t){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".enableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].status=i.CONTEXT_ENABLED;if(this.__ngev.contexts[t].queue.length>0){i.processQueue.call(this,t)}return this};i.prototype.queueListenerContext=function e(t){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".queueListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].status=i.CONTEXT_QUEUED;return this};i.prototype.serializeListenerContext=function e(t,n){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".serializeListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].serial=n===undefined?true:!!n;return this};i.prototype.setListenerContextNice=function e(t,n){if(!this.__ngev){i.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".setListenerContextNice(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].nice=Math.floor(n);return this};i.prototype.destroyListenerContext=function e(t){var n,r,s,o,c=[];if(!t||typeof t!=="string"){throw new TypeError(".disableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev){i.init.call(this)}for(s in this.__ngev.listeners){o=null;r=this.__ngev.listeners[s].length;for(n=0;n<r;n++){if(this.__ngev.listeners[s][n].context===t){o=[];c.push(this.__ngev.listeners[s][n])}else if(o){o.push(this.__ngev.listeners[s][n])}}if(o){this.__ngev.listeners[s]=o}}if(this.__ngev.contexts[t]){delete this.__ngev.contexts[t]}if(c.length&&this.__ngev.listeners.removeListener.length){this.emit("removeListener",c)}return this};i.processQueue=function e(t,n){var r,s;if(!this.__ngev.contexts[t]){return}r=this.__ngev.contexts[t];if(n){r.ready=true}this.__ngev.recursion++;while(r.ready&&r.queue.length){s=r.queue.shift();if(s.event.interrupt){continue}try{if(s.nice<0){if(this.__ngev.recursion>=-s.nice){setImmediate(i.listenerWrapper.bind(this,s.listener,s.event,r))}else{i.listenerWrapper.call(this,s.listener,s.event,r)}}else{setTimeout(i.listenerWrapper.bind(this,s.listener,s.event,r),s.nice)}}catch(e){this.__ngev.recursion--;throw e}}this.__ngev.recursion--};i.on=i.prototype.on;i.once=i.prototype.once;i.off=i.prototype.off;if(n.AsyncTryCatch){i.prototype.asyncTryCatchId=n.AsyncTryCatch.NextGenEvents.length;n.AsyncTryCatch.NextGenEvents.push(i);if(n.AsyncTryCatch.substituted){n.AsyncTryCatch.substitute()}}i.Proxy=e("./Proxy.js")}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../package.json":4,"./Proxy.js":2}],2:[function(e,t,n){"use strict";function i(){return i.create()}t.exports=i;var r=e("./NextGenEvents.js");var s="NextGenEvents/message";function o(){}i.create=function e(){var t=Object.create(i.prototype,{localServices:{value:{},enumerable:true},remoteServices:{value:{},enumerable:true},nextAckId:{value:1,writable:true,enumerable:true}});return t};i.prototype.addLocalService=function e(t,n,i){this.localServices[t]=c.create(this,t,n,i);return this.localServices[t]};i.prototype.addRemoteService=function e(t){this.remoteServices[t]=a.create(this,t);return this.remoteServices[t]};i.prototype.destroy=function e(){var t=this;Object.keys(this.localServices).forEach(function(e){t.localServices[e].destroy();delete t.localServices[e]});Object.keys(this.remoteServices).forEach(function(e){t.remoteServices[e].destroy();delete t.remoteServices[e]});this.receive=this.send=o};i.prototype.push=function e(t){if(t.__type!==s||!t.service||typeof t.service!=="string"||!t.event||typeof t.event!=="string"||!t.method){return}switch(t.method){case"event":return this.remoteServices[t.service]&&this.remoteServices[t.service].receiveEvent(t);case"ackEmit":return this.remoteServices[t.service]&&this.remoteServices[t.service].receiveAckEmit(t);case"emit":return this.localServices[t.service]&&this.localServices[t.service].receiveEmit(t);case"listen":return this.localServices[t.service]&&this.localServices[t.service].receiveListen(t);case"ignore":return this.localServices[t.service]&&this.localServices[t.service].receiveIgnore(t);case"ackEvent":return this.localServices[t.service]&&this.localServices[t.service].receiveAckEvent(t);default:return}};i.prototype.receive=function e(t){this.push(t)};i.prototype.send=function e(){throw new Error("The send() method of the Proxy MUST be extended/overwritten")};function c(e,t,n,i){return c.create(e,t,n,i)}i.LocalService=c;c.create=function e(t,n,i,s){var o=Object.create(c.prototype,{proxy:{value:t,enumerable:true},id:{value:n,enumerable:true},emitter:{value:i,writable:true,enumerable:true},internalEvents:{value:Object.create(r.prototype),writable:true,enumerable:true},events:{value:{},enumerable:true},canListen:{value:!!s.listen,writable:true,enumerable:true},canEmit:{value:!!s.emit,writable:true,enumerable:true},canAck:{value:!!s.ack,writable:true,enumerable:true},canRpc:{value:!!s.rpc,writable:true,enumerable:true},destroyed:{value:false,writable:true,enumerable:true}});return o};c.prototype.destroy=function e(){var t=this;Object.keys(this.events).forEach(function(e){t.emitter.off(e,t.events[e]);delete t.events[e]});this.emitter=null;this.destroyed=true};c.prototype.receiveEmit=function e(t){if(this.destroyed||!this.canEmit||t.ack&&!this.canAck){return}var n=this;var i={emitter:this.emitter,name:t.event,args:t.args||[]};if(t.ack){i.callback=function e(i){n.proxy.send({__type:s,service:n.id,method:"ackEmit",ack:t.ack,event:t.event,interruption:i})}}r.emitEvent(i)};c.prototype.receiveListen=function e(t){if(this.destroyed||!this.canListen||t.ack&&!this.canAck){return}if(t.ack){if(this.events[t.event]){if(this.events[t.event].ack){return}this.emitter.off(t.event,this.events[t.event])}this.events[t.event]=c.forwardWithAck.bind(this);this.events[t.event].ack=true;this.emitter.on(t.event,this.events[t.event],{eventObject:true,async:true})}else{if(this.events[t.event]){if(!this.events[t.event].ack){return}this.emitter.off(t.event,this.events[t.event])}this.events[t.event]=c.forward.bind(this);this.events[t.event].ack=false;this.emitter.on(t.event,this.events[t.event],{eventObject:true})}};c.prototype.receiveIgnore=function e(t){if(this.destroyed||!this.canListen){return}if(!this.events[t.event]){return}this.emitter.off(t.event,this.events[t.event]);this.events[t.event]=null};c.prototype.receiveAckEvent=function e(t){if(this.destroyed||!this.canListen||!this.canAck||!t.ack||!this.events[t.event]||!this.events[t.event].ack){return}this.internalEvents.emit("ack",t)};c.forward=function e(t){if(this.destroyed){return}this.proxy.send({__type:s,service:this.id,method:"event",event:t.name,args:t.args})};c.forward.ack=false;c.forwardWithAck=function e(t,n){if(this.destroyed){return}var i=this;if(!t.callback){this.proxy.send({__type:s,service:this.id,method:"event",event:t.name,args:t.args});n();return}var r=false;var o=this.proxy.nextAckId++;var c=function e(t){if(r||t.ack!==o){return}r=true;i.internalEvents.off("ack",e);n()};this.internalEvents.on("ack",c);this.proxy.send({__type:s,service:this.id,method:"event",event:t.name,ack:o,args:t.args})};c.forwardWithAck.ack=true;function a(e,t){return a.create(e,t)}i.RemoteService=a;var l=1;var f=2;a.create=function e(t,n){var i=Object.create(a.prototype,{proxy:{value:t,enumerable:true},id:{value:n,enumerable:true},emitter:{value:Object.create(r.prototype),writable:true,enumerable:true},internalEvents:{value:Object.create(r.prototype),writable:true,enumerable:true},events:{value:{},enumerable:true},destroyed:{value:false,writable:true,enumerable:true}});return i};a.prototype.destroy=function e(){var t=this;this.emitter.removeAllListeners();this.emitter=null;Object.keys(this.events).forEach(function(e){delete t.events[e]});this.destroyed=true};a.prototype.emit=function e(t){if(this.destroyed){return}var n=this,i,r,o,c;if(typeof t==="number"){throw new TypeError("Cannot emit with a nice value on a remote service")}if(typeof arguments[arguments.length-1]!=="function"){i=Array.prototype.slice.call(arguments,1);this.proxy.send({__type:s,service:this.id,method:"emit",event:t,args:i});return}i=Array.prototype.slice.call(arguments,1,-1);r=arguments[arguments.length-1];o=this.proxy.nextAckId++;c=false;var a=function e(t){if(c||t.ack!==o){return}c=true;n.internalEvents.off("ack",e);r(t.interruption)};this.internalEvents.on("ack",a);this.proxy.send({__type:s,service:this.id,method:"emit",ack:o,event:t,args:i})};a.prototype.addListener=function e(t,n,i){if(this.destroyed){return}if(typeof n!=="function"){i=n;n=undefined}if(!i||typeof i!=="object"){i={}}i.fn=n||i.fn;this.emitter.addListener(t,i);if(!this.emitter.__ngev.listeners[t]||!this.emitter.__ngev.listeners[t].length){return}if(i.async&&this.events[t]!==f){this.events[t]=f;this.proxy.send({__type:s,service:this.id,method:"listen",ack:true,event:t})}else if(!i.async&&!this.events[t]){this.events[t]=l;this.proxy.send({__type:s,service:this.id,method:"listen",event:t})}};a.prototype.on=a.prototype.addListener;a.prototype.once=r.prototype.once;a.prototype.removeListener=function e(t,n){if(this.destroyed){return}this.emitter.removeListener(t,n);if((!this.emitter.__ngev.listeners[t]||!this.emitter.__ngev.listeners[t].length)&&this.events[t]){this.events[t]=0;this.proxy.send({__type:s,service:this.id,method:"ignore",event:t})}};a.prototype.off=a.prototype.removeListener;a.prototype.receiveEvent=function e(t){var n=this;if(this.destroyed||!this.events[t.event]){return}var i={emitter:this.emitter,name:t.event,args:t.args||[]};if(t.ack){i.callback=function e(){n.proxy.send({__type:s,service:n.id,method:"ackEvent",ack:t.ack,event:t.event})}}r.emitEvent(i);var o=i.name;if(!this.emitter.__ngev.listeners[o]||!this.emitter.__ngev.listeners[o].length){this.events[o]=0;this.proxy.send({__type:s,service:this.id,method:"ignore",event:o})}};a.prototype.receiveAckEmit=function e(t){if(this.destroyed||!t.ack||this.events[t.event]!==f){return}this.internalEvents.emit("ack",t)}},{"./NextGenEvents.js":1}],3:[function(e,t,n){"use strict";if(typeof window.setImmediate!=="function"){window.setImmediate=function e(t){setTimeout(t,0)}}t.exports=e("./NextGenEvents.js");t.exports.isBrowser=true},{"./NextGenEvents.js":1}],4:[function(e,t,n){t.exports={name:"nextgen-events",version:"0.10.1",description:"The next generation of events handling for javascript! New: abstract away the network!",main:"lib/NextGenEvents.js",engines:{node:">=4.5.0"},directories:{test:"test"},dependencies:{},devDependencies:{browserify:"^14.4.0","expect.js":"^0.3.1",jshint:"^2.9.2",mocha:"^2.5.3","uglify-js-es6":"^2.8.9",ws:"^3.2.0"},scripts:{test:"mocha -R dot"},repository:{type:"git",url:"https://github.com/cronvel/nextgen-events.git"},keywords:["events","async","emit","listener","context","series","serialize","namespace","proxy","network"],author:"Cédric Ronvel",license:"MIT",bugs:{url:"https://github.com/cronvel/nextgen-events/issues"},config:{"tea-time":{coverDir:["lib"]}},copyright:{title:"Next-Gen Events",years:[2015,2016],owner:"Cédric Ronvel"}}},{}]},{},[3])(3)});