(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.NextGenEvents=e()}})(function(){var e,t,n;return function(){function e(t,n,i){function r(o,c){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!c&&u)return u(o,!0);if(s)return s(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return r(n||e)},f,f.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}return e}()({1:[function(e,t,n){(function(n,i){"use strict";const r=n.browser?window.setImmediate:n.nextTick;if(!i.__NEXTGEN_EVENTS__){i.__NEXTGEN_EVENTS__={recursions:0}}var s=i.__NEXTGEN_EVENTS__;function o(){}t.exports=o;o.prototype.__prototypeUID__="nextgen-events/NextGenEvents";o.prototype.__prototypeVersion__=e("../package.json").version;o.SYNC=-Infinity;o.DESYNC=-1;o.defaultMaxListeners=Infinity;o.init=function e(){Object.defineProperty(this,"__ngev",{configurable:true,value:new o.Internal})};o.Internal=function e(t){this.nice=o.SYNC;this.interruptible=false;this.contexts={};this.desync=setImmediate;this.depth=0;this.states={};this.stateGroups={};this.listeners={error:[],interrupt:[],newListener:[],removeListener:[]};this.maxListeners=o.defaultMaxListeners;if(t){this.nice=t.nice;this.interruptible=t.interruptible;Object.assign(this.states,t.states),Object.assign(this.stateGroups,t.stateGroups),Object.keys(t.listeners).forEach(e=>{this.listeners[e]=t.listeners[e].slice()});Object.keys(t.contexts).forEach(e=>{var n=t.contexts[e];this.contexts[e]={nice:n.nice,ready:true,status:n.status,serial:n.serial,scopes:{}}})}};o.initFrom=function e(t){if(!t.__ngev){o.init.call(t)}Object.defineProperty(this,"__ngev",{configurable:true,value:new o.Internal(t.__ngev)})};o.mergeListeners=function e(t){if(!this.__ngev){o.init.call(this)}var n=this.__ngev.listeners;this.__ngev.listeners={};Object.keys(n).forEach(e=>{this.__ngev.listeners[e]=[]});t.forEach(e=>{if(!e.__ngev){o.init.call(e)}Object.keys(e.__ngev.listeners).forEach(e=>{if(!this.__ngev.listeners[e]){this.__ngev.listeners[e]=[]}})});Object.keys(this.__ngev.listeners).forEach(e=>{var i,r,s=[];if(n[e]){n[e].forEach(n=>{for(i=0,r=t.length;i<r;i++){if(!t[i].__ngev.listeners[e]||t[i].__ngev.listeners[e].indexOf(n)===-1){s.push(n);break}}})}t.forEach(t=>{t.__ngev.listeners[e].forEach(t=>{if(this.__ngev.listeners[e].indexOf(t)===-1&&s.indexOf(t)===-1){this.__ngev.listeners[e].push(t)}})})})};o.filterOutCallback=function(e,t){return e!==t};o.prototype.addListener=function e(t,i,r){var s={},c;if(!this.__ngev){o.init.call(this)}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}if(!t||typeof t!=="string"){throw new TypeError(".addListener(): argument #0 should be a non-empty string")}if(typeof i!=="function"){if(r===true&&i&&typeof i==="object"){r=s=i;i=undefined}else{r=i;i=undefined}}if(!r||typeof r!=="object"){r={}}s.fn=i||r.fn;s.id=r.id!==undefined?r.id:s.fn;s.once=!!r.once;s.async=!!r.async;s.eventObject=!!r.eventObject;s.nice=r.nice!==undefined?Math.floor(r.nice):o.SYNC;s.context=typeof r.context==="string"?r.context:null;if(typeof s.fn!=="function"){throw new TypeError(".addListener(): a function or an object with a 'fn' property which value is a function should be provided")}if(s.context&&typeof s.context==="string"&&!this.__ngev.contexts[s.context]){this.addListenerContext(s.context)}s.event=t;if(this.__ngev.listeners.newListener.length){c=this.__ngev.listeners.newListener.slice();this.__ngev.listeners[t].push(s);o.emitEvent({emitter:this,name:"newListener",args:[[s]],listeners:c});if(this.__ngev.states[t]){o.emitToOneListener(this.__ngev.states[t],s)}return this}this.__ngev.listeners[t].push(s);if(this.__ngev.listeners[t].length===this.__ngev.maxListeners+1){n.emitWarning("Possible NextGenEvents memory leak detected. "+this.__ngev.listeners[t].length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit",{type:"MaxListenersExceededWarning"})}if(this.__ngev.states[t]){o.emitToOneListener(this.__ngev.states[t],s)}return this};o.prototype.on=o.prototype.addListener;o.prototype.once=function e(t,n,i){if(n&&typeof n==="object"){n.once=true}else if(i&&typeof i==="object"){i.once=true}else{i={once:true}}return this.addListener(t,n,i)};o.prototype.waitFor=function e(t){return new Promise(e=>{this.addListener(t,t=>e(t),{once:true})})};o.prototype.waitForAll=function e(t){return new Promise(e=>{this.addListener(t,(...t)=>e(t),{once:true})})};o.prototype.removeListener=function e(t,n){var i,r,s=[],c=[];if(!t||typeof t!=="string"){throw new TypeError(".removeListener(): argument #0 should be a non-empty string")}if(!this.__ngev){o.init.call(this)}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}r=this.__ngev.listeners[t].length;for(i=0;i<r;i++){if(this.__ngev.listeners[t][i].id===n){c.push(this.__ngev.listeners[t][i])}else{s.push(this.__ngev.listeners[t][i])}}this.__ngev.listeners[t]=s;if(c.length&&this.__ngev.listeners.removeListener.length){this.emit("removeListener",c)}return this};o.prototype.off=o.prototype.removeListener;o.prototype.removeAllListeners=function e(t){var n;if(!this.__ngev){o.init.call(this)}if(t){if(!t||typeof t!=="string"){throw new TypeError(".removeAllListeners(): argument #0 should be undefined or a non-empty string")}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}n=this.__ngev.listeners[t];this.__ngev.listeners[t]=[];if(n.length&&this.__ngev.listeners.removeListener.length){this.emit("removeListener",n)}}else{this.__ngev.listeners={error:[],interrupt:[],newListener:[],removeListener:[]}}return this};o.listenerWrapper=function e(t,n,i,r){var s,c;if(n.interrupt){return}if(t.async){if(i){i.ready=!r}c=(e=>{n.listenersDone++;if(e&&n.emitter.__ngev.interruptible&&!n.interrupt&&n.name!=="interrupt"){n.interrupt=e;if(n.callback){o.emitCallback(n)}n.emitter.emit("interrupt",n.interrupt)}else if(n.listenersDone>=n.listeners.length&&n.callback){o.emitCallback(n)}if(r){o.processScopeQueue(n.emitter,i,true,true)}});if(t.eventObject){t.fn(n,c)}else{s=t.fn.apply(undefined,n.args.concat(c))}}else{if(t.eventObject){t.fn(n)}else{s=t.fn.apply(undefined,n.args)}n.listenersDone++}if(s&&n.emitter.__ngev.interruptible&&!n.interrupt&&n.name!=="interrupt"){n.interrupt=s;if(n.callback){o.emitCallback(n)}n.emitter.emit("interrupt",n.interrupt)}else if(n.listenersDone>=n.listeners.length&&n.callback){o.emitCallback(n)}};var c=0;o.prototype.emit=function e(...t){var n;n={emitter:this,interrupt:null,sync:true};if(typeof t[0]==="number"){n.nice=Math.floor(t[0]);n.name=t[1];if(!n.name||typeof n.name!=="string"){throw new TypeError(".emit(): when argument #0 is a number, argument #1 should be a non-empty string")}if(typeof t[t.length-1]==="function"){n.callback=t[t.length-1];n.args=t.slice(2,-1)}else{n.args=t.slice(2)}}else{n.name=t[0];if(!n.name||typeof n.name!=="string"){throw new TypeError(".emit(): argument #0 should be an number or a non-empty string")}if(typeof t[t.length-1]==="function"){n.callback=t[t.length-1];n.args=t.slice(1,-1)}else{n.args=t.slice(1)}}return o.emitEvent(n)};o.prototype.waitForEmit=function e(...t){return new Promise(e=>{this.emit(...t,t=>e(t))})};o.emitEvent=function e(t){var n=t.emitter,i,r,u=0,a,f;if(!n.__ngev){o.init.call(n)}a=n.__ngev.states[t.name];if(a!==undefined){if(a&&t.args.length===a.args.length&&t.args.every((e,t)=>e===a.args[t])){return}n.__ngev.stateGroups[t.name].forEach(e=>{n.__ngev.states[e]=null});n.__ngev.states[t.name]=t}if(!n.__ngev.listeners[t.name]){n.__ngev.listeners[t.name]=[]}t.id=c++;t.listenersDone=0;t.once=!!t.once;if(t.nice===undefined||t.nice===null){t.nice=n.__ngev.nice}if(!t.listeners){t.listeners=n.__ngev.listeners[t.name].slice()}s.recursions++;t.depth=n.__ngev.depth++;f=[];for(i=0,r=t.listeners.length;i<r;i++){u++;o.emitToOneListener(t,t.listeners[i],f)}s.recursions--;if(!t.callback){n.__ngev.depth--}if(f.length&&n.__ngev.listeners.removeListener.length){n.emit("removeListener",f)}if(!u){if(t.name==="error"){if(t.args[0]){throw t.args[0]}else{throw Error("Uncaught, unspecified 'error' event.")}}if(t.callback){o.emitCallback(t)}}t.sync=false;return t};o.emitToOneListener=function e(t,n,i){var r=t.emitter,c,u,a,f,l=false;c=n.context&&r.__ngev.contexts[n.context];if(c&&c.status===o.CONTEXT_DISABLED){return}if(c){f=Math.max(t.nice,n.nice,c.nice);a=c.serial;u=o.getContextScope(c,t.depth)}else{f=Math.max(t.nice,n.nice)}if(n.once){r.__ngev.listeners[t.name]=r.__ngev.listeners[t.name].filter(o.filterOutCallback.bind(undefined,n));if(i){i.push(n)}else{l=true}}if(c&&(c.status===o.CONTEXT_QUEUED||!u.ready)){u.queue.push({event:t,listener:n,nice:f})}else{try{if(f<0){if(s.recursions>=-f){r.__ngev.desync(o.listenerWrapper.bind(r,n,t,u,a))}else{o.listenerWrapper.call(r,n,t,u,a)}}else{setTimeout(o.listenerWrapper.bind(r,n,t,u,a),f)}}catch(e){s.recursions--;throw e}}if(l&&r.__ngev.listeners.removeListener.length){r.emit("removeListener",[n])}};o.emitCallback=function e(t){var n=t.callback;delete t.callback;if(t.sync&&t.emitter.__ngev.nice!==o.SYNC){t.emitter.__ngev.desync(()=>{t.emitter.__ngev.depth--;n(t.interrupt,t)})}else{t.emitter.__ngev.depth--;n(t.interrupt,t)}};o.prototype.listeners=function e(t){if(!t||typeof t!=="string"){throw new TypeError(".listeners(): argument #0 should be a non-empty string")}if(!this.__ngev){o.init.call(this)}if(!this.__ngev.listeners[t]){this.__ngev.listeners[t]=[]}return this.__ngev.listeners[t].slice()};o.listenerCount=function(e,t){if(!e||!(e instanceof o)){throw new TypeError(".listenerCount(): argument #0 should be an instance of NextGenEvents")}return e.listenerCount(t)};o.prototype.listenerCount=function(e){if(!e||typeof e!=="string"){throw new TypeError(".listenerCount(): argument #1 should be a non-empty string")}if(!this.__ngev){o.init.call(this)}if(!this.__ngev.listeners[e]){this.__ngev.listeners[e]=[]}return this.__ngev.listeners[e].length};o.prototype.setNice=function e(t){if(!this.__ngev){o.init.call(this)}this.__ngev.nice=Math.floor(+t||0)};o.prototype.desyncUseNextTick=function e(t){if(!this.__ngev){o.init.call(this)}this.__ngev.desync=t?r:setImmediate};o.prototype.setInterruptible=function e(t){if(!this.__ngev){o.init.call(this)}this.__ngev.interruptible=!!t};o.share=function(e,t){if(!(e instanceof o)||!(t instanceof o)){throw new TypeError("NextGenEvents.share() arguments should be instances of NextGenEvents")}if(!e.__ngev){o.init.call(e)}Object.defineProperty(t,"__ngev",{configurable:true,value:e.__ngev})};o.reset=function e(t){Object.defineProperty(t,"__ngev",{configurable:true,value:null})};o.prototype.getMaxListeners=function(){if(!this.__ngev){o.init.call(this)}return this.__ngev.maxListeners};o.prototype.setMaxListeners=function(e){if(!this.__ngev){o.init.call(this)}this.__ngev.maxListeners=typeof e==="number"&&!Number.isNaN(e)?Math.floor(e):o.defaultMaxListeners;return this};o.noop=function(){};o.prototype.defineStates=function e(...t){if(!this.__ngev){o.init.call(this)}t.forEach(e=>{this.__ngev.states[e]=null;this.__ngev.stateGroups[e]=t})};o.prototype.hasState=function e(t){if(!this.__ngev){o.init.call(this)}return!!this.__ngev.states[t]};o.prototype.getAllStates=function e(){if(!this.__ngev){o.init.call(this)}return Object.keys(this.__ngev.states).filter(e=>this.__ngev.states[e])};o.groupAddListener=function e(t,n,i,r){if(typeof i!=="function"){r=i;i=undefined}if(!r||typeof r!=="object"){r={}}i=i||r.fn;delete r.fn;r.id=r.id||i;t.forEach(e=>{e.addListener(n,i.bind(undefined,e),r)})};o.groupOn=o.groupAddListener;o.groupOnce=function e(t,n,i,r){if(i&&typeof i==="object"){i.once=true}else if(r&&typeof r==="object"){r.once=true}else{r={once:true}}return this.groupAddListener(t,n,i,r)};o.groupWaitFor=function e(t,n){return Promise.all(t.map(e=>e.waitFor(n)))};o.groupWaitForAll=function e(t,n){return Promise.all(t.map(e=>e.waitForAll(n)))};o.groupOnceFirst=function e(t,n,i,r){var s,c=false;if(typeof i!=="function"){r=i;i=undefined}if(!r||typeof r!=="object"){r={}}i=i||r.fn;delete r.fn;r.id=r.id||i;s=((...e)=>{if(c){return}c=true;o.groupRemoveListener(t,n,r.id);i(...e)});t.forEach(e=>{e.once(n,s.bind(undefined,e),r)})};o.groupWaitForFirst=function e(t,n){return new Promise(e=>{o.groupOnceFirst(t,n,t=>e(t))})};o.groupWaitForFirstAll=function e(t,n){return new Promise(e=>{o.groupOnceFirst(t,n,(...t)=>e(t))})};o.groupOnceLast=function e(t,n,i,r){var s,o=false,c=t.length;if(typeof i!=="function"){r=i;i=undefined}if(!r||typeof r!=="object"){r={}}i=i||r.fn;delete r.fn;r.id=r.id||i;s=((...e)=>{if(o){return}if(--c){return}o=true;i(...e)});t.forEach(e=>{e.once(n,s.bind(undefined,e),r)})};o.groupWaitForLast=function e(t,n){return new Promise(e=>{o.groupOnceLast(t,n,t=>e(t))})};o.groupWaitForLastAll=function e(t,n){return new Promise(e=>{o.groupOnceLast(t,n,(...t)=>e(t))})};o.groupRemoveListener=function e(t,n,i){t.forEach(e=>{e.removeListener(n,i)})};o.groupOff=o.groupRemoveListener;o.groupRemoveAllListeners=function e(t,n){t.forEach(e=>{e.removeAllListeners(n)})};o.groupEmit=function e(t,...n){var i,r,s=1,c,u=t.length,a,f,l=false;if(typeof n[n.length-1]==="function"){c=-1;a=n[n.length-1];f=(e=>{if(l){return}if(e){l=true;a(e)}else if(!--u){l=true;a()}})}if(typeof n[0]==="number"){s=2;r=typeof n[0]}i=n[s-1];n=n.slice(s,c);t.forEach(e=>{o.emitEvent({emitter:e,name:i,args:n,nice:r,callback:f})})};o.groupWaitForEmit=function e(t,...n){return new Promise(e=>{o.groupEmit(t,...n,t=>e(t))})};o.groupDefineStates=function e(t,...n){t.forEach(e=>{e.defineStates(...n)})};o.groupGlobalOnce=o.groupOnceFirst;o.groupGlobalOnceAll=o.groupOnceLast;o.CONTEXT_ENABLED=0;o.CONTEXT_DISABLED=1;o.CONTEXT_QUEUED=2;o.prototype.addListenerContext=function e(t,n){if(!this.__ngev){o.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".addListenerContext(): argument #0 should be a non-empty string")}if(!n||typeof n!=="object"){n={}}var i=this.__ngev.contexts[t];if(!i){i=this.__ngev.contexts[t]={nice:o.SYNC,ready:true,status:o.CONTEXT_ENABLED,serial:false,scopes:{}}}if(n.nice!==undefined){i.nice=Math.floor(n.nice)}if(n.status!==undefined){i.status=n.status}if(n.serial!==undefined){i.serial=!!n.serial}return this};o.getContextScope=function e(t,n){var i=t.scopes[n];if(!i){i=t.scopes[n]={ready:true,queue:[]}}return i};o.prototype.disableListenerContext=function e(t){if(!this.__ngev){o.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".disableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].status=o.CONTEXT_DISABLED;return this};o.prototype.enableListenerContext=function e(t){if(!this.__ngev){o.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".enableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}var n=this.__ngev.contexts[t];n.status=o.CONTEXT_ENABLED;Object.values(n.scopes).forEach(e=>{if(e.queue.length>0){o.processScopeQueue(this,e,n.serial)}});return this};o.prototype.queueListenerContext=function e(t){if(!this.__ngev){o.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".queueListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].status=o.CONTEXT_QUEUED;return this};o.prototype.serializeListenerContext=function e(t,n){if(!this.__ngev){o.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".serializeListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].serial=n===undefined?true:!!n;return this};o.prototype.setListenerContextNice=function e(t,n){if(!this.__ngev){o.init.call(this)}if(!t||typeof t!=="string"){throw new TypeError(".setListenerContextNice(): argument #0 should be a non-empty string")}if(!this.__ngev.contexts[t]){this.addListenerContext(t)}this.__ngev.contexts[t].nice=Math.floor(n);return this};o.prototype.destroyListenerContext=function e(t){var n,i,r,s,c=[];if(!t||typeof t!=="string"){throw new TypeError(".disableListenerContext(): argument #0 should be a non-empty string")}if(!this.__ngev){o.init.call(this)}for(r in this.__ngev.listeners){s=null;i=this.__ngev.listeners[r].length;for(n=0;n<i;n++){if(this.__ngev.listeners[r][n].context===t){s=[];c.push(this.__ngev.listeners[r][n])}else if(s){s.push(this.__ngev.listeners[r][n])}}if(s){this.__ngev.listeners[r]=s}}if(this.__ngev.contexts[t]){delete this.__ngev.contexts[t]}if(c.length&&this.__ngev.listeners.removeListener.length){this.emit("removeListener",c)}return this};o.processScopeQueue=function e(t,n,i,r){var c;if(r){n.ready=true}s.recursions++;while(n.ready&&n.queue.length){c=n.queue.shift();if(c.event.interrupt){continue}try{if(c.nice<0){if(s.recursions>=-c.nice){t.__ngev.desync(o.listenerWrapper.bind(t,c.listener,c.event,n,i))}else{o.listenerWrapper.call(t,c.listener,c.event,n,i)}}else{setTimeout(o.listenerWrapper.bind(t,c.listener,c.event,n,i),c.nice)}}catch(e){s.recursions--;throw e}}s.recursions--};o.on=o.prototype.on;o.once=o.prototype.once;o.off=o.prototype.off;if(i.AsyncTryCatch){o.prototype.asyncTryCatchId=i.AsyncTryCatch.NextGenEvents.length;i.AsyncTryCatch.NextGenEvents.push(o);if(i.AsyncTryCatch.substituted){i.AsyncTryCatch.substitute()}}o.Proxy=e("./Proxy.js")}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../package.json":5,"./Proxy.js":2,_process:4}],2:[function(e,t,n){"use strict";function i(){this.localServices={};this.remoteServices={};this.nextAckId=1}t.exports=i;var r=e("./NextGenEvents.js");var s="NextGenEvents/message";function o(){}i.create=((...e)=>new i(...e));i.prototype.addLocalService=function e(t,n,i){this.localServices[t]=c.create(this,t,n,i);return this.localServices[t]};i.prototype.addRemoteService=function e(t){this.remoteServices[t]=u.create(this,t);return this.remoteServices[t]};i.prototype.destroy=function e(){Object.keys(this.localServices).forEach(e=>{this.localServices[e].destroy();delete this.localServices[e]});Object.keys(this.remoteServices).forEach(e=>{this.remoteServices[e].destroy();delete this.remoteServices[e]});this.receive=this.send=o};i.prototype.push=function e(t){if(t.__type!==s||!t.service||typeof t.service!=="string"||!t.event||typeof t.event!=="string"||!t.method){return}switch(t.method){case"event":return this.remoteServices[t.service]&&this.remoteServices[t.service].receiveEvent(t);case"ackEmit":return this.remoteServices[t.service]&&this.remoteServices[t.service].receiveAckEmit(t);case"emit":return this.localServices[t.service]&&this.localServices[t.service].receiveEmit(t);case"listen":return this.localServices[t.service]&&this.localServices[t.service].receiveListen(t);case"ignore":return this.localServices[t.service]&&this.localServices[t.service].receiveIgnore(t);case"ackEvent":return this.localServices[t.service]&&this.localServices[t.service].receiveAckEvent(t);default:return}};i.prototype.receive=function e(t){this.push(t)};i.prototype.send=function e(){throw new Error("The send() method of the Proxy MUST be extended/overwritten")};function c(e,t,n,i){return c.create(e,t,n,i)}i.LocalService=c;c.create=function e(t,n,i,s){var o=Object.create(c.prototype,{proxy:{value:t,enumerable:true},id:{value:n,enumerable:true},emitter:{value:i,writable:true,enumerable:true},internalEvents:{value:Object.create(r.prototype),writable:true,enumerable:true},events:{value:{},enumerable:true},canListen:{value:!!s.listen,writable:true,enumerable:true},canEmit:{value:!!s.emit,writable:true,enumerable:true},canAck:{value:!!s.ack,writable:true,enumerable:true},canRpc:{value:!!s.rpc,writable:true,enumerable:true},destroyed:{value:false,writable:true,enumerable:true}});return o};c.prototype.destroy=function e(){Object.keys(this.events).forEach(e=>{this.emitter.off(e,this.events[e]);delete this.events[e]});this.emitter=null;this.destroyed=true};c.prototype.receiveEmit=function e(t){if(this.destroyed||!this.canEmit||t.ack&&!this.canAck){return}var n={emitter:this.emitter,name:t.event,args:t.args||[]};if(t.ack){n.callback=(e=>{this.proxy.send({__type:s,service:this.id,method:"ackEmit",ack:t.ack,event:t.event,interruption:e})})}r.emitEvent(n)};c.prototype.receiveListen=function e(t){if(this.destroyed||!this.canListen||t.ack&&!this.canAck){return}if(t.ack){if(this.events[t.event]){if(this.events[t.event].ack){return}this.emitter.off(t.event,this.events[t.event])}this.events[t.event]=c.forwardWithAck.bind(this);this.events[t.event].ack=true;this.emitter.on(t.event,this.events[t.event],{eventObject:true,async:true})}else{if(this.events[t.event]){if(!this.events[t.event].ack){return}this.emitter.off(t.event,this.events[t.event])}this.events[t.event]=c.forward.bind(this);this.events[t.event].ack=false;this.emitter.on(t.event,this.events[t.event],{eventObject:true})}};c.prototype.receiveIgnore=function e(t){if(this.destroyed||!this.canListen){return}if(!this.events[t.event]){return}this.emitter.off(t.event,this.events[t.event]);this.events[t.event]=null};c.prototype.receiveAckEvent=function e(t){if(this.destroyed||!this.canListen||!this.canAck||!t.ack||!this.events[t.event]||!this.events[t.event].ack){return}this.internalEvents.emit("ack",t)};c.forward=function e(t){if(this.destroyed){return}this.proxy.send({__type:s,service:this.id,method:"event",event:t.name,args:t.args})};c.forward.ack=false;c.forwardWithAck=function e(t,n){if(this.destroyed){return}if(!t.callback){this.proxy.send({__type:s,service:this.id,method:"event",event:t.name,args:t.args});n();return}var i=false;var r=this.proxy.nextAckId++;var o=e=>{if(i||e.ack!==r){return}i=true;this.internalEvents.off("ack",o);n()};this.internalEvents.on("ack",o);this.proxy.send({__type:s,service:this.id,method:"event",event:t.name,ack:r,args:t.args})};c.forwardWithAck.ack=true;function u(e,t){return u.create(e,t)}i.RemoteService=u;var a=1;var f=2;u.create=function e(t,n){var i=Object.create(u.prototype,{proxy:{value:t,enumerable:true},id:{value:n,enumerable:true},emitter:{value:Object.create(r.prototype),writable:true,enumerable:true},internalEvents:{value:Object.create(r.prototype),writable:true,enumerable:true},events:{value:{},enumerable:true},destroyed:{value:false,writable:true,enumerable:true}});return i};u.prototype.destroy=function e(){this.emitter.removeAllListeners();this.emitter=null;Object.keys(this.events).forEach(e=>{delete this.events[e]});this.destroyed=true};u.prototype.emit=function e(t,...n){if(this.destroyed){return}var i,r,o;if(typeof t==="number"){throw new TypeError("Cannot emit with a nice value on a remote service")}if(typeof n[n.length-1]!=="function"){this.proxy.send({__type:s,service:this.id,method:"emit",event:t,args:n});return}i=n.pop();r=this.proxy.nextAckId++;o=false;var c=e=>{if(o||e.ack!==r){return}o=true;this.internalEvents.off("ack",c);i(e.interruption)};this.internalEvents.on("ack",c);this.proxy.send({__type:s,service:this.id,method:"emit",ack:r,event:t,args:n})};u.prototype.addListener=function e(t,n,i){if(this.destroyed){return}if(typeof n!=="function"){i=n;n=undefined}if(!i||typeof i!=="object"){i={}}i.fn=n||i.fn;this.emitter.addListener(t,i);if(!this.emitter.__ngev.listeners[t]||!this.emitter.__ngev.listeners[t].length){return}if(i.async&&this.events[t]!==f){this.events[t]=f;this.proxy.send({__type:s,service:this.id,method:"listen",ack:true,event:t})}else if(!i.async&&!this.events[t]){this.events[t]=a;this.proxy.send({__type:s,service:this.id,method:"listen",event:t})}};u.prototype.on=u.prototype.addListener;u.prototype.once=r.prototype.once;u.prototype.removeListener=function e(t,n){if(this.destroyed){return}this.emitter.removeListener(t,n);if((!this.emitter.__ngev.listeners[t]||!this.emitter.__ngev.listeners[t].length)&&this.events[t]){this.events[t]=0;this.proxy.send({__type:s,service:this.id,method:"ignore",event:t})}};u.prototype.off=u.prototype.removeListener;u.prototype.receiveEvent=function e(t){if(this.destroyed||!this.events[t.event]){return}var n={emitter:this.emitter,name:t.event,args:t.args||[]};if(t.ack){n.callback=(()=>{this.proxy.send({__type:s,service:this.id,method:"ackEvent",ack:t.ack,event:t.event})})}r.emitEvent(n);var i=n.name;if(!this.emitter.__ngev.listeners[i]||!this.emitter.__ngev.listeners[i].length){this.events[i]=0;this.proxy.send({__type:s,service:this.id,method:"ignore",event:i})}};u.prototype.receiveAckEmit=function e(t){if(this.destroyed||!t.ack||this.events[t.event]!==f){return}this.internalEvents.emit("ack",t)}},{"./NextGenEvents.js":1}],3:[function(e,t,n){(function(n){"use strict";if(typeof window.setImmediate!=="function"){window.setImmediate=function e(t){setTimeout(t,0)}}if(!n.emitWarning){n.emitWarning=function(){}}t.exports=e("./NextGenEvents.js");t.exports.isBrowser=true}).call(this,e("_process"))},{"./NextGenEvents.js":1,_process:4}],4:[function(e,t,n){var i=t.exports={};var r;var s;function o(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){r=setTimeout}else{r=o}}catch(e){r=o}try{if(typeof clearTimeout==="function"){s=clearTimeout}else{s=c}}catch(e){s=c}})();function u(e){if(r===setTimeout){return setTimeout(e,0)}if((r===o||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function a(e){if(s===clearTimeout){return clearTimeout(e)}if((s===c||!s)&&clearTimeout){s=clearTimeout;return clearTimeout(e)}try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}var f=[];var l=false;var h;var v=-1;function p(){if(!l||!h){return}l=false;if(h.length){f=h.concat(f)}else{v=-1}if(f.length){d()}}function d(){if(l){return}var e=u(p);l=true;var t=f.length;while(t){h=f;f=[];while(++v<t){if(h){h[v].run()}}v=-1;t=f.length}h=null;l=false;a(e)}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}f.push(new _(e,t));if(f.length===1&&!l){u(d)}};function _(e,t){this.fun=e;this.array=t}_.prototype.run=function(){this.fun.apply(null,this.array)};i.title="browser";i.browser=true;i.env={};i.argv=[];i.version="";i.versions={};function g(){}i.on=g;i.addListener=g;i.once=g;i.off=g;i.removeListener=g;i.removeAllListeners=g;i.emit=g;i.prependListener=g;i.prependOnceListener=g;i.listeners=function(e){return[]};i.binding=function(e){throw new Error("process.binding is not supported")};i.cwd=function(){return"/"};i.chdir=function(e){throw new Error("process.chdir is not supported")};i.umask=function(){return 0}},{}],5:[function(e,t,n){t.exports={name:"nextgen-events",version:"1.0.1",description:"The next generation of events handling for javascript! New: abstract away the network!",main:"lib/NextGenEvents.js",engines:{node:">=6.0.0"},directories:{test:"test"},dependencies:{},devDependencies:{browserify:"^16.2.2","uglify-js-es6":"^2.8.9",ws:"^5.1.1"},scripts:{test:"tea-time -R dot"},repository:{type:"git",url:"https://github.com/cronvel/nextgen-events.git"},keywords:["events","async","emit","listener","context","series","serialize","namespace","proxy","network"],author:"Cédric Ronvel",license:"MIT",bugs:{url:"https://github.com/cronvel/nextgen-events/issues"},config:{"tea-time":{coverDir:["lib"]}},copyright:{title:"Next-Gen Events",years:[2015,2018],owner:"Cédric Ronvel"}}},{}]},{},[3])(3)});